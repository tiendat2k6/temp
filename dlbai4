#include<bits/stdc++.h>
#define int long long
using namespace std;

const int N = 1e5 + 5;

//--------------------------------------------
    int n, a[N], d[N][5], x[N];
//--------------------------------------------

void solve()
{
    cin >> n;
    for(int i = 1; i <= n; i++) cin >> a[i];

    d[2][1] = a[1];

    d[4][1] = a[1]+a[3];
    d[4][2] = a[1]+a[2];

    d[5][1] = a[1]+a[3];

    d[6][1] = max(a[1]+a[2]+a[5], a[1]+a[3]+a[5]);
    d[6][2] = a[1]+a[3]+a[4];
    d[6][3] = a[1]+a[2]+a[3];

    for(int i = 1; i <= 6; i++)
        x[i] = max({d[i][1], d[i][2], d[i][3]});

    for(int i = 8; i <= n; i += 2)
    {
        d[i][1] = x[i-2] + a[i-1];
        d[i][2] = x[i-4] + max(a[i-3]+a[i-2], a[i-3]+a[i-1]);
        d[i][3] = x[i-6] + max(a[i-5]+a[i-4]+a[i-3], a[i-5]+a[i-4]+a[i-1]);

        x[i] = max({d[i][1], d[i][2], d[i][3]});
    }

    int ans = max({x[n], x[n-1]+a[n], x[n-2]+a[n]+a[n-1]});
    ans = max(ans, x[n-4]+a[n-1]+a[n-2]+a[n-3]);
    ans = max(ans, x[n-5] + a[n-4]+a[n-3]+a[n-2]);

    cout << max(ans, x[n-3]+a[n]+a[n-1]+a[n-2]);
}

int32_t main()
{
    ios_base::sync_with_stdio(false);
    cin.tie(NULL); cout.tie(NULL);

    // freopen("test.inp", "r", stdin);
//    freopen("test.out", "w", stdout);

    freopen("dlbai4.inp", "r", stdin);
    freopen("dlbai4.out", "w", stdout);

    solve();

    return 0;
}
